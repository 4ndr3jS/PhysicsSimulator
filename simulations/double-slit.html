<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Double Slit Experiment - Physics Simulator</title>
    <link rel="stylesheet" href="simulations.css">
</head>
<body>
    <nav>
        <a href="index.html">Physics Simulator</a>
        <ul>
            <a href="../index.html">Home</a>
            <a href="../simulations.html">Simulations</a>
            <a href="../guide.html">Guide</a>
            <a href="../theory.html">Theory</a>
            <a href="../learn.html">Learn Physics</a>
        </ul>
    </nav>

    <div class="sim-container">
        <div class="sim-header">
            <h1>üåä Double Slit Experiment</h1>
            <p>Observe wave interference creating bright and dark fringes on a screen</p>
            <p class="sim-subtitle">Difficulty: <span class="sim-badge sim-badge-hard">‚óè Hard</span></p>
        </div>

        <div class="sim-layout">
            <div class="sim-canvas-section">
                <div class="sim-canvas-wrapper">
                    <canvas id="simCanvas" class="sim-canvas" width="800" height="500"></canvas>
                    
                    <div class="sim-controls">
                        <button class="sim-btn sim-btn-primary" onclick="startSimulation()">‚ñ∂Ô∏è Start</button>
                        <button class="sim-btn sim-btn-secondary" onclick="pauseSimulation()" id="pauseBtn">‚è∏Ô∏è Pause</button>
                        <button class="sim-btn sim-btn-secondary" onclick="resetSimulation()">üîÑ Reset</button>
                        <button class="sim-btn sim-btn-secondary" onclick="toggleView()">üëÅÔ∏è Toggle View</button>
                    </div>
                </div>

                <div class="sim-panel">
                    <div class="sim-panel-header">
                        <span class="sim-panel-icon">üìê</span>
                        <span>Physics Formulas</span>
                    </div>
                    <div class="sim-formula">
                        <div class="sim-formula-equation">d sin(Œ∏) = mŒª</div>
                        <div class="sim-formula-description">Bright fringes (constructive)</div>
                    </div>
                    <div class="sim-formula">
                        <div class="sim-formula-equation">d sin(Œ∏) = (m + ¬Ω)Œª</div>
                        <div class="sim-formula-description">Dark fringes (destructive)</div>
                    </div>
                    <div class="sim-formula">
                        <div class="sim-formula-equation">ŒîœÜ = 2œÄ(Œîr / Œª)</div>
                        <div class="sim-formula-description">Phase difference</div>
                    </div>
                    <div class="sim-formula">
                        <div class="sim-formula-equation">I = 4I‚ÇÄ cos¬≤(œÄd sin(Œ∏)/Œª)</div>
                        <div class="sim-formula-description">Intensity pattern</div>
                    </div>
                </div>

                <div class="sim-panel">
                    <div class="sim-panel-header">
                        <span class="sim-panel-icon">üìö</span>
                        <span>Key Concepts</span>
                    </div>
                    <ul class="sim-info-list">
                        <li>Light acts as both particle and wave</li>
                        <li>Two slits create two coherent sources</li>
                        <li>Path difference causes interference pattern</li>
                        <li>Bright fringes: waves arrive in phase</li>
                        <li>Dark fringes: waves arrive out of phase</li>
                    </ul>
                </div>

                <div class="sim-panel">
                    <div class="sim-panel-header">
                        <span class="sim-panel-icon">üî¨</span>
                        <span>Try This</span>
                    </div>
                    <ul class="sim-info-list">
                        <li>Increase wavelength to see wider spacing</li>
                        <li>Decrease slit separation for fewer fringes</li>
                        <li>Watch wavefronts interfere in real-time</li>
                        <li>Observe the intensity pattern on screen</li>
                        <li>Toggle between wave and screen view</li>
                    </ul>
                </div>
            </div>

            <div class="sim-sidebar">
                <div class="sim-panel">
                    <div class="sim-panel-header">
                        <span class="sim-panel-icon">‚öôÔ∏è</span>
                        <span>Experiment Parameters</span>
                    </div>

                    <div class="sim-control-group">
                        <div class="sim-control-label">
                            <span>Wavelength (Œª)</span>
                            <span class="sim-control-value"><span id="val-wavelength">40</span> nm</span>
                        </div>
                        <input type="range" id="slider-wavelength" min="20" max="80" step="5" value="40" oninput="updateParameter('wavelength', this.value)">
                    </div>

                    <div class="sim-control-group">
                        <div class="sim-control-label">
                            <span>Slit Separation (d)</span>
                            <span class="sim-control-value"><span id="val-slitSep">100</span> px</span>
                        </div>
                        <input type="range" id="slider-slitSep" min="50" max="200" step="10" value="100" oninput="updateParameter('slitSep', this.value)">
                    </div>

                    <div class="sim-control-group">
                        <div class="sim-control-label">
                            <span>Slit Width</span>
                            <span class="sim-control-value"><span id="val-slitWidth">10</span> px</span>
                        </div>
                        <input type="range" id="slider-slitWidth" min="5" max="20" step="1" value="10" oninput="updateParameter('slitWidth', this.value)">
                    </div>

                    <div class="sim-control-group">
                        <div class="sim-control-label">
                            <span>Wave Amplitude</span>
                            <span class="sim-control-value"><span id="val-amplitude">30</span></span>
                        </div>
                        <input type="range" id="slider-amplitude" min="10" max="50" step="5" value="30" oninput="updateParameter('amplitude', this.value)">
                    </div>

                    <div class="sim-control-group">
                        <div class="sim-control-label">
                            <span>Frequency</span>
                            <span class="sim-control-value"><span id="val-frequency">2.0</span> Hz</span>
                        </div>
                        <input type="range" id="slider-frequency" min="0.5" max="4.0" step="0.5" value="2.0" oninput="updateParameter('frequency', this.value)">
                    </div>

                    <div class="sim-divider"></div>

                    <div class="sim-toggle">
                        <span>Show Wavefronts</span>
                        <div class="sim-toggle-switch active" id="toggle-wavefronts" onclick="toggleWavefronts()"></div>
                    </div>

                    <div class="sim-toggle">
                        <span>Show Barrier</span>
                        <div class="sim-toggle-switch active" id="toggle-barrier" onclick="toggleBarrier()"></div>
                    </div>

                    <div class="sim-toggle">
                        <span>Show Screen Pattern</span>
                        <div class="sim-toggle-switch active" id="toggle-screen" onclick="toggleScreen()"></div>
                    </div>
                </div>

                <div class="sim-stats">
                    <div class="sim-stat-card">
                        <div class="sim-stat-value blue" id="stat-fringes">0</div>
                        <div class="sim-stat-label">Visible Fringes</div>
                    </div>
                    <div class="sim-stat-card">
                        <div class="sim-stat-value green" id="stat-spacing">0</div>
                        <div class="sim-stat-label">Fringe Spacing (px)</div>
                    </div>
                    <div class="sim-stat-card">
                        <div class="sim-stat-value purple" id="stat-ratio">0</div>
                        <div class="sim-stat-label">Œª/d Ratio</div>
                    </div>
                    <div class="sim-stat-card">
                        <div class="sim-stat-value orange" id="stat-maxint">0</div>
                        <div class="sim-stat-label">Max Intensity</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const canvas = document.getElementById('simCanvas');
        const ctx = canvas.getContext('2d');
        const W = 800, H = 500;
        
        let running = false, aid = null, time = 0;
        let showWaves = true, showBarrier = true, showScreenPattern = true;
        let viewMode = 'wave';
        
        let params = {
            wavelength: 40,
            slitSep: 100,
            slitWidth: 10,
            amplitude: 30,
            frequency: 2.0
        };

        const barrierX = 250;
        const screenX = 700;
        const slit1Y = H / 2 - params.slitSep / 2;
        const slit2Y = H / 2 + params.slitSep / 2;

        function updateParameter(p, v) {
            document.getElementById(`val-${p}`).textContent = v;
            params[p] = parseFloat(v);
            updateStats();
            if (!running) draw();
        }

        function updateStats() {
            const L = screenX - barrierX;
            const fringeSpacing = params.wavelength * L / params.slitSep;
            const visibleFringes = Math.floor(H / fringeSpacing);
            const ratio = (params.wavelength / params.slitSep).toFixed(3);
            const maxInt = (4 * params.amplitude * params.amplitude).toFixed(0);
            
            document.getElementById('stat-fringes').textContent = visibleFringes;
            document.getElementById('stat-spacing').textContent = fringeSpacing.toFixed(1);
            document.getElementById('stat-ratio').textContent = ratio;
            document.getElementById('stat-maxint').textContent = maxInt;
        }

        function getWaveValue(x, y, sourceX, sourceY) {
            const dx = x - sourceX;
            const dy = y - sourceY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const k = 2 * Math.PI / params.wavelength;
            const omega = 2 * Math.PI * params.frequency;
            return params.amplitude * Math.sin(k * distance - omega * time);
        }

        function draw() {
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, W, H);

            if (viewMode === 'wave') {
                drawWaveView();
            } else {
                drawScreenView();
            }
        }

        function drawWaveView() {
            const slit1Y = H / 2 - params.slitSep / 2;
            const slit2Y = H / 2 + params.slitSep / 2;
            if (showWaves) {
                const step = 3;
                const imageData = ctx.createImageData(W, H);
                const data = imageData.data;
                
                for (let y = 0; y < H; y += step) {
                    for (let x = 0; x < W; x += step) {
                        let totalAmp = 0;

                        if (x >= barrierX) {
                            totalAmp += getWaveValue(x, y, barrierX, slit1Y);
                            totalAmp += getWaveValue(x, y, barrierX, slit2Y);
                        }
                        
                        const normalized = (totalAmp / (params.amplitude * 2) + 1) / 2;
                        let r, g, b;
                        
                        if (normalized > 0.5) {
                            const t = (normalized - 0.5) * 2;
                            r = Math.floor(255 * t);
                            g = Math.floor(200 * t);
                            b = Math.floor(50 * t);
                        } else {
                            const t = normalized * 2;
                            r = Math.floor(20 * t);
                            g = Math.floor(20 * t);
                            b = Math.floor(100 * t);
                        }
                        
                        for (let dy = 0; dy < step; dy++) {
                            for (let dx = 0; dx < step; dx++) {
                                const px = x + dx;
                                const py = y + dy;
                                if (px < W && py < H) {
                                    const idx = (py * W + px) * 4;
                                    data[idx] = r;
                                    data[idx + 1] = g;
                                    data[idx + 2] = b;
                                    data[idx + 3] = 255;
                                }
                            }
                        }
                    }
                }
                
                ctx.putImageData(imageData, 0, 0);

                const omega = 2 * Math.PI * params.frequency;
                const numRings = 12;
                
                for (let i = 0; i < numRings; i++) {
                    const radius = (i * params.wavelength + (omega * time) % (2 * Math.PI) / (2 * Math.PI) * params.wavelength);
                    if (radius > 0) {
                        ctx.strokeStyle = 'rgba(255, 200, 50, 0.4)';
                        ctx.lineWidth = 1.5;
                        ctx.beginPath();
                        ctx.arc(barrierX, slit1Y, radius, 0, Math.PI * 2);
                        ctx.stroke();
                        
                        ctx.beginPath();
                        ctx.arc(barrierX, slit2Y, radius, 0, Math.PI * 2);
                        ctx.stroke();
                    }
                }
            }

            if (showBarrier) {
                ctx.fillStyle = '#2a2a2a';
                ctx.fillRect(barrierX - 8, 0, 16, slit1Y - params.slitWidth / 2);
                ctx.fillRect(barrierX - 8, slit1Y + params.slitWidth / 2, 16, slit2Y - slit1Y - params.slitWidth);
                ctx.fillRect(barrierX - 8, slit2Y + params.slitWidth / 2, 16, H - slit2Y - params.slitWidth / 2);
                
                ctx.strokeStyle = '#555';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(barrierX, 0);
                ctx.lineTo(barrierX, slit1Y - params.slitWidth / 2);
                ctx.moveTo(barrierX, slit1Y + params.slitWidth / 2);
                ctx.lineTo(barrierX, slit2Y - params.slitWidth / 2);
                ctx.moveTo(barrierX, slit2Y + params.slitWidth / 2);
                ctx.lineTo(barrierX, H);
                ctx.stroke();
                
                ctx.fillStyle = '#ffeb6b';
                ctx.shadowColor = '#ffeb6b';
                ctx.shadowBlur = 10;
                ctx.beginPath();
                ctx.arc(barrierX, slit1Y, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.beginPath();
                ctx.arc(barrierX, slit2Y, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
                
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 14px sans-serif';
                ctx.fillText('S‚ÇÅ', barrierX - 30, slit1Y + 5);
                ctx.fillText('S‚ÇÇ', barrierX - 30, slit2Y + 5);
            }

            if (showScreenPattern) {
                ctx.strokeStyle = '#555';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(screenX, 0);
                ctx.lineTo(screenX, H);
                ctx.stroke();

                ctx.lineWidth = 0;
                for (let y = 0; y < H; y++) {
                    const r1 = Math.sqrt((screenX - barrierX) ** 2 + (y - slit1Y) ** 2);
                    const r2 = Math.sqrt((screenX - barrierX) ** 2 + (y - slit2Y) ** 2);
                    const pathDiff = Math.abs(r2 - r1);
                    const phase = (2 * Math.PI * pathDiff) / params.wavelength;
                    const intensity = 4 * params.amplitude * params.amplitude * Math.cos(phase / 2) ** 2;
                    const brightness = Math.min(255, intensity * 1.5);
                    
                    ctx.fillStyle = `rgb(${brightness}, ${brightness * 0.8}, ${brightness * 0.3})`;
                    ctx.fillRect(screenX + 1, y, 15, 1);
                }

                ctx.fillStyle = '#aaa';
                ctx.font = 'bold 13px sans-serif';
                ctx.fillText('SCREEN', screenX + 20, 25);
            }
        }

        function drawScreenView() {
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, W, H);
            
            ctx.strokeStyle = '#1a1a1a';
            ctx.lineWidth = 1;
            for (let i = 0; i < W; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, H);
                ctx.stroke();
            }
            for (let i = 0; i < H; i += 50) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(W, i);
                ctx.stroke();
            }

            ctx.strokeStyle = '#ffeb6b';
            ctx.lineWidth = 3;
            ctx.shadowColor = '#ffeb6b';
            ctx.shadowBlur = 10;
            ctx.beginPath();
            
            for (let y = 0; y < H; y++) {
                const L = screenX - barrierX;
                const slit1Y = H / 2 - params.slitSep / 2;
                const slit2Y = H / 2 + params.slitSep / 2;
                
                const r1 = Math.sqrt(L ** 2 + (y - slit1Y) ** 2);
                const r2 = Math.sqrt(L ** 2 + (y - slit2Y) ** 2);
                const pathDiff = Math.abs(r2 - r1);
                const phase = (2 * Math.PI * pathDiff) / params.wavelength;
                const intensity = 4 * params.amplitude * params.amplitude * Math.cos(phase / 2) ** 2;
                
                const x = 100 + (intensity / (4 * params.amplitude * params.amplitude)) * 400;
                
                if (y === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            ctx.shadowBlur = 0;

            ctx.fillStyle = 'rgba(255, 235, 107, 0.15)';
            ctx.lineTo(100, H);
            ctx.lineTo(100, 0);
            ctx.closePath();
            ctx.fill();

            ctx.strokeStyle = '#555';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(100, 0);
            ctx.lineTo(100, H);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(100, H / 2);
            ctx.lineTo(W - 50, H / 2);
            ctx.stroke();

            ctx.fillStyle = '#ccc';
            ctx.font = 'bold 16px sans-serif';
            ctx.fillText('INTENSITY', 130, 35);
            ctx.fillText('Position on Screen ‚Üí', W / 2 - 80, H - 25);

            ctx.fillStyle = '#ff6b6b';
            ctx.shadowColor = '#ff6b6b';
            ctx.shadowBlur = 15;
            ctx.beginPath();
            ctx.arc(500, H / 2, 6, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 13px sans-serif';
            ctx.fillText('Central Maximum', 520, H / 2 + 5);
        }

        function update(dt) {
            time += dt;
        }

        function anim() {
            if (!running) return;
            update(0.016);
            draw();
            aid = requestAnimationFrame(anim);
        }

        function startSimulation() {
            if (!running) {
                running = true;
                anim();
            }
        }

        function pauseSimulation() {
            if (running) {
                running = false;
                cancelAnimationFrame(aid);
                document.getElementById('pauseBtn').textContent = '‚ñ∂Ô∏è Play';
            } else {
                running = true;
                document.getElementById('pauseBtn').textContent = '‚è∏Ô∏è Pause';
                anim();
            }
        }

        function resetSimulation() {
            running = false;
            cancelAnimationFrame(aid);
            time = 0;
            document.getElementById('pauseBtn').textContent = '‚è∏Ô∏è Pause';
            draw();
        }

        function toggleView() {
            viewMode = viewMode === 'wave' ? 'screen' : 'wave';
            draw();
        }

        function toggleWavefronts() {
            showWaves = !showWaves;
            document.getElementById('toggle-wavefronts').classList.toggle('active');
            draw();
        }

        function toggleBarrier() {
            showBarrier = !showBarrier;
            document.getElementById('toggle-barrier').classList.toggle('active');
            draw();
        }

        function toggleScreen() {
            showScreenPattern = !showScreenPattern;
            document.getElementById('toggle-screen').classList.toggle('active');
            draw();
        }

        updateStats();
        draw();
    </script>
</body>
</html>